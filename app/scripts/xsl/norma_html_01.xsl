<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:local="local" xmlns:fo="http://www.w3.org/1999/XSL/Format" version="1.1" exclude-result-prefixes="fo"><xsl:variable name="anio" select="substring(/proyecto/numexp, string-length(/proyecto/numexp)-3, 4)"/>
    <!--xsl:variable name="notes-strong"><span class="list-incisos-num"><xsl:value-of select="//meta/notes/note/p//ref"/></span></xsl:variable--><xsl:function name="local:capital-case"><xsl:param name="string"/><xsl:value-of select="concat(upper-case(substring(normalize-space($string), 1, 1)), lower-case(substring(normalize-space($string), 2)))"/></xsl:function><xsl:template match="/"><html lang="es"><head><meta charset="utf-8"/><title><xsl:value-of select="//docTitle"/></title><script type="text/javascript" src="../js/jquery-1.11.1.js"/><script type="text/javascript" src="../js/jquery.transform2d.js"/><link rel="stylesheet" type="text/css" href="../css/normalize.css"/><link rel="stylesheet" type="text/css" href="../fonts/font-awesome-4.2.0/css/font-awesome.css"/><link rel="stylesheet" type="text/css" href="../css/style_01.css"/><link rel="stylesheet" type="text/css" href="../css/accordion.css"/><script type="text/javascript" src="../js/accordion.js"/></head><body><xsl:apply-templates select="act"/></body></html></xsl:template><xsl:template match="act"><div class="wrapper-main"><xsl:apply-templates select="preface|body"/></div></xsl:template><xsl:template match="preface"><h1 class="title-ley"><xsl:value-of select="local:capital-case(//docTitle)"/><strong><xsl:text>Digesto Jurídico Argentino</xsl:text></strong><xsl:choose><xsl:when test="p/docNumber[@id='CodigoDigesto']|p/docNumber[@id='NumeroLey']"><span class="title-docnumber"><xsl:text>Código: </xsl:text><xsl:value-of select="p/docNumber[@id='CodigoDigesto']"/></span><span class="title-docnumber"><xsl:text>N° de Norma: </xsl:text><xsl:value-of select="p/docNumber[@id='NumeroLey']"/></span></xsl:when><xsl:otherwise><span class="title-docnumber"><xsl:text>Código: </xsl:text><xsl:value-of select="p/docNumber"/></span></xsl:otherwise></xsl:choose></h1></xsl:template><xsl:template match="body"><main class="wrapper-body"><xsl:apply-templates select="title|chapter|section|clause|article|book"/><xsl:apply-templates select="//meta/notes"/></main></xsl:template><xsl:template match="meta/notes"><section class="accordion wrapper-notes"><div class="active"><h3 class="title title-secondary"><i class="fa fa-angle-up"/><xsl:text>NOTAS</xsl:text></h3><article><xsl:apply-templates select="note"/></article></div></section></xsl:template><xsl:template match="meta/notes/note"><p class="list-incisos"><xsl:apply-templates select="p"/><xsl:apply-templates select="p/ref"/></p></xsl:template>
    <!--<xsl:template match="meta/notes/note/p">
        <xsl:value-of select=".">
            <span class="list-incisos-num">
                <xsl:value-of select="ref"/>
            </span>
        </xsl:value-of>-->
        <!--xsl:value-of select="concat(., //$notes-strong, ' ')"/-->
    <!--/xsl:template--><xsl:template match="meta/notes/note/p/ref"/><xsl:template match="title"><xsl:for-each select="."><section class="accordion wrapper-title"><div class="active"><h2 class="title title-titulo"><i class="fa fa-angle-up"/><xsl:value-of select="num"/><span><xsl:value-of select="local:capital-case(heading)"/></span></h2><div class="accordion-content"><xsl:apply-templates select="chapter|section|clause|article|book"/></div></div></section></xsl:for-each></xsl:template><xsl:template match="chapter"><section class="accordion wrapper-chapter"><div class="active"><xsl:choose><xsl:when test="ancestor::section"><h3 class="title title-secondary"><i class="fa fa-angle-up"/><xsl:value-of select="num"/><span><xsl:value-of select="local:capital-case(heading)"/></span></h3></xsl:when><xsl:otherwise><h3 class="title title-primary"><i class="fa fa-angle-up"/><xsl:value-of select="num"/><span><xsl:value-of select="local:capital-case(heading)"/></span></h3></xsl:otherwise></xsl:choose><div class="accordion-content"><xsl:apply-templates select="section|clause|article"/></div></div></section></xsl:template><xsl:template match="section"><section class="accordion wrapper-section"><div class="active"><xsl:choose><xsl:when test="ancestor::chapter"><h3 class="title title-secondary"><i class="fa fa-angle-up"/><xsl:value-of select="num"/><span><xsl:value-of select="local:capital-case(heading)"/></span></h3></xsl:when><xsl:otherwise><h3 class="title title-primary"><i class="fa fa-angle-up"/><xsl:value-of select="num"/><span><xsl:value-of select="local:capital-case(heading)"/></span></h3></xsl:otherwise></xsl:choose><div class="accordion-content"><xsl:apply-templates select="chapter|clause|article"/></div></div></section></xsl:template><xsl:template match="clause"><section class="wrapper-clause"><h4 class="title-article"><xsl:value-of select="local:capital-case(heading)"/></h4><xsl:apply-templates select="section|chapter|article"/></section></xsl:template><xsl:template match="article"><xsl:for-each select="."><article class="wrapper-article"><p><span class="article-num"><xsl:value-of select="concat(num, ' ')"/></span><xsl:apply-templates select="heading"/><xsl:apply-templates select="content/p"/></p><xsl:apply-templates select="content/blockList"/></article></xsl:for-each></xsl:template><xsl:template match="article/heading"><span class="title-article-sub"><xsl:value-of select="concat(., ' ')"/></span></xsl:template><xsl:template match="content/p[position() = 1]"><xsl:value-of select="."/></xsl:template><xsl:template match="content/p[position() &gt; 1]"><p><xsl:value-of select="."/></p></xsl:template><xsl:template match="content/blockList"><ul class="list-incisos"><xsl:for-each select="item"><li><p><span class="list-incisos-num"><xsl:value-of select="concat(num, ' ')"/></span><xsl:value-of select="p"/></p></li></xsl:for-each></ul></xsl:template></xsl:stylesheet>